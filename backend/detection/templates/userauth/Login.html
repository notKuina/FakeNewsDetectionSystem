{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Login Page</title>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  
  <div class="flex items-center justify-center mt-20">
    <div class="w-[600px] p-6 rounded-lg shadow-2xl">
      <!--
        Approach 1: Classic form POST submission (default)
        -----------------------------------------------
        Your form submits directly to the Django view at URL named 'login'
        This will reload the page, and the backend will handle authentication,
        showing errors if any or redirecting on success.
      -->
      <form id="loginForm" class="space-y-3" method="POST" action="{% url 'userauth:login' %}">
        {% csrf_token %}
        <h2 class="text-2xl text-center text-blue-950" style="font-family: 'Roboto', serif;">Login</h2>
        <p class="font-serif text-center text-xl text-black">Get access to submit new News</p>

        {% if error %}
          <p class="text-red-600 text-center">{{ error }}</p>
        {% endif %}

        <p class="text-center mt-4 text-gray-600">
          Don't have an account?
          <a href="{% url 'userauth:register' %}" class="text-blue-950 hover:underline">Register here</a>
        </p>

        <div>
          <label for="email" class="block mb-1 font-medium text-gray-700">Email:</label>
          <input
            type="email"
            name="email"
            id="email"
            placeholder="Enter your email"
            class="w-full px-4 py-2 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            required
          />
          <span id="emailMsg" class="text-red-500 text-sm"></span>
        </div>

        <div class="relative">
          <label for="psw" class="block mb-1 font-medium text-gray-700">Password:</label>
          <input
            type="password"
            name="psw"
            id="psw"
            placeholder="Enter your password"
            class="w-full px-4 py-2 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            required
          />
          <i class="fas fa-eye absolute right-3 top-[38px] text-gray-500 cursor-pointer" onclick="hideShow(this)"></i>

          <span id="pswMsg" class="text-red-500 text-sm"></span>
        </div>

        <button
          type="submit"
          class="w-[100px] bg-blue-950 hover:bg-blue-800 text-white font-semibold py-2 rounded-3xl mx-auto flex items-center justify-center transition-colors"
        >
          Submit
        </button>

        <span id="submitMsg" class="text-center text-sm block mt-2"></span>

        <a href="{% url 'userauth:forgot_password' %}" class="hover:underline text-gray-600 block mt-2">Forgot password?</a>
      </form>
    </div>
  </div>
  
  <!--
    Approach 2: AJAX login with JavaScript fetch (optional)
    -------------------------------------------------------
    To use this:
      - Change form `action="#"` or remove it
      - Uncomment the JS below or your Login.js script with fetch POST to `/login_user/`
      - The backend view `login_user` will respond with JSON and redirect URL
      - JS will handle redirect without page reload

    Make sure your urls.py has:
      path('login_user/', views.login_user, name='login_user'),

    And your JS sends a POST with JSON body including email and password,
    plus the CSRF token in headers.
  -->

  <!-- <script src="{% static 'Login.js' %}"></script> -->

  <script>
  // Optional: Toggle password visibility
  function hideShow(icon) {
      const psw = document.getElementById('psw');
      if (psw.type === "password") {
          psw.type = "text";
          icon.classList.remove("fa-eye");
          icon.classList.add("fa-eye-slash");
      } else {
          psw.type = "password";
          icon.classList.remove("fa-eye-slash");
          icon.classList.add("fa-eye");
      }
  }
  </script>
</body>
</html>
